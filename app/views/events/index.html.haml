- model_class = Event
.page-header
  %h1= t('events.list')#, :default => model_class.model_name.human.pluralize

.navbar.navbar-inverse{role: "navigation", style: "padding-right:40px;"}
  %ul.nav.navbar-nav
    %li= link_to content_tag(:li, fa_icon("asterisk", text: (t 'actions.new'))), new_event_path
  %ul.nav.navbar-nav.navbar-right
    %li.toga= link_to content_tag(:li, fa_icon("search", text: (t 'actions.search'))), "#", class: "index_search_bar"
    %li= link_to (fa_icon("print", text: (t 'actions.print'))), event_list_events_path(params.merge(format: 'pdf'))

.row
  %table.table-striped.table-hover.ogma
    %thead
      %tr
        %th{style: "width:20%;"}= sort_link(@search, :eventname,(t 'events.en'))
        %th{style: "width:13%;"}= sort_link(@search, :start_at,(t 'events.sd'))
        %th{style: "width:13%;"}= sort_link(@search, :end_at,(t 'events.ed'))
        %th{style: "width:15%;"}= sort_link(@search, :location,(t 'events.loca'))
        %th{style: "width:14%;"}= sort_link(@search, :officiated,(t 'events.ob'))
        %th{style: "width:25%;"}= sort_link(@search, :staff_name,(t 'events.cb'))

    %tbody
      = render "index_search"
      - @events.each do |event|
        %tr
          %td= link_to event.eventname, event_path(event)
          %td= event.start_str rescue event.start_at.try(:strftime, "%d-%m-%Y, %a, %l:%M %P")
          %td= event.end_str rescue event.end_at.try(:strftime, "%d-%m-%Y, %a, %l:%M %P")
          %td= event.location
          %td= event.officiated
          %td= current_user.college.code=='amsas' ? event.staff.try(:staff_with_rank) : event.staff.try(:name)

  .right{style:"padding:0 30px; margin:0;"}= paginate @events, :theme => 'twitter-bootstrap-3'