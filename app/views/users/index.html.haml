- model_class = User
.page-header
  %h1= t('user.title')#, :default => model_class.model_name.human.pluralize
  
.navbar.navbar-inverse{role: "navigation", style: "padding-right:40px;"}
  %ul.nav.navbar-nav
    /%li= link_to content_tag(:li, fa_icon("asterisk", text: (t 'actions.new'))), new_staff_info_path
  %ul.nav.navbar-nav.navbar-right
    %li= link_to content_tag(:li, fa_icon("search", text: (t 'actions.search'))), "#", class: "index_search_bar"
    %li= link_to content_tag(:li, fa_icon("print", text: (t 'actions.print'))), "#"
      
.row
  %table.table-striped.table-hover.ogma
    %thead
      %tr
        %th= sort_link(@search, :email, (t 'user.email'))
        %th= sort_link(@search, :name, (t 'user.userable_id'))
        %th= sort_link(@search, :userable_type, (t 'user.user_type'))
        %th= sort_link(@search, :roles, (t 'user.roles'))
        /%th{style: "width:33%;"}= sort_link(@search, :staff_position_name,(t 'staff.position'))
    %tbody
      = render "search_bar"
      - @user_by_type.each do |user_type, users| 
        - for user in users
          %tr
            %td= link_to user.email, edit_user_path(user)
            %td=h user.userable.try(:name)
            %td
              =h user.userable_type
              - if user.userable_type == "Staff" 
                \-
                - for position in user.userable.positions
                  = position.name
            %td
              /= user.roles
              - count_role=0
              - for role in user.roles
                = role.name
                - count_role+=1
                - if count_role < user.roles.count
                  ,
   
       
  .right{style:"padding:0 30px; margin:0;"}= paginate @users, :theme => 'twitter-bootstrap-3'

