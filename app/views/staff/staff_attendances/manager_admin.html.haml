-model_class = StaffAttendance
.page-header
  %h1= t('attendance.title2')
= render 'shared/flashes'
  
.navbar.navbar-inverse{role: "navigation", style: "padding-right:40px;"}
  %ul.nav.navbar-nav
    - permitted_to? :manage, :staff_staff_attendances do
      %li= link_to content_tag(:li, fa_icon("list", text: (t 'staff_attendance.list1'))), staff_staff_attendances_path
    %li= link_to content_tag(:li, fa_icon("th-large", text: (t 'attendance.title'))), '/attendance/manager'
    %li= link_to content_tag(:li, fa_icon("th", text: (t 'fingerprint.title'))), staff_fingerprints_path
  %ul.nav.navbar-nav.navbar-right
    %li.toga= link_to content_tag(:li, fa_icon("search", text: (t 'actions.search'))), "#", class: "index_search_bar"
    - permitted_to? :manager_admin, :staff_staff_attendances do
      - if @late_early_recs.size > 0
        %li= link_to content_tag(:li, fa_icon("print", text: (t 'actions.print'))), manager_admin_list_staff_staff_attendances_path(params.merge(format: 'pdf'))

.row
  %table.table-striped.table-hover.ogma
    %thead
      %tr
        %th{width: '8%'}=t 'attendance.attdate'
        %th{width: '6%'}=t 'attendance.time_in'
        %th{width: '6%'}=t 'attendance.time_out'
        %th{width: '20%'}=t 'attendance.staff_id'
        %th{width: '15%'}=t 'staff_attendance.unit_department'
        %th{width: '15%'}=t 'attendance.reason'
        %th{width: '20%'}=t 'attendance.approve_id'
        %th{width: '10%'}=t 'attendance.approvestatus'
    %tbody
      = render "index_search2"

      - if @late_early_recs.size > 0
        - for attendance in @late_early_recs
          %tr
            %td.centre=h attendance.logged_at.strftime('%d-%m-%Y')
            %td.centre.text-red=h attendance.logged_at.strftime('%H:%M') if attendance.log_type=='I' or  attendance.log_type=='i' 
            %td.centre.text-red=h attendance.logged_at.strftime('%H:%M') if attendance.log_type=='O' or  attendance.log_type=='o' 
            %td=h attendance.try(:attended).try(:staff_with_rank)
            %td=h StaffAttendance.unit_for_thumb(attendance.thumb_id)
            %td=h attendance.reason? ? attendance.reason : (t 'staff_attendance.not_submitted_yet')
            %td=h attendance.approved_by.blank? ? "" : attendance.try(:approver).try(:staff_with_rank_position_unit) 
            %td
              - if attendance.is_approved == true  
                = fa_icon("check")
              - elsif attendance.is_approved == false  
                = fa_icon("times")
                
  .right{style:"padding:0 30px; margin:0;"}= paginate @late_early_recs, :theme => 'twitter-bootstrap-3'
%BR
%BR