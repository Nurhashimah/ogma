- model_class = TravelClaim
.page-header
  %h1=t 'staff.travel_claim.title'
 
= render 'shared/flashes'

.row
  .col-md-offset-1
    / Nav tabs
    %ul.nav.nav-tabs
      %li.active= link_to (t 'staff.travel_claim.request_travel_log'),"#travel_request_log", "data-toggle" => "tab"
      %li= link_to (t 'staff.travel_claim.claims_details'),"#claims_details", "data-toggle" => "tab"
      %li= link_to (t 'staff.travel_claim.claims_approval'),"#claims_approval", "data-toggle" => "tab"

    / display 
    .tab-content{style:"padding-top:1em"}
      .col-md-8.col-md-offset-1
        %dl.dl-horizontal
          %dt= t 'staff.travel_claim.month_year', :default => model_class.human_attribute_name(:claim_month) + ":"
          %dd=h @travel_claim.claim_month.strftime("%B %Y") 
          
          %dt= t 'staff.travel_claim.staff_id', :default => model_class.human_attribute_name(:staff_id) + ":"
          %dd=h @travel_claim.staff.staff_name_with_position unless @travel_claim.staff.blank?
        
      #travel_request_log.tab-pane.active
        - for travel_request in @travel_claim.travel_requests
          = render 'tab_travel_request_log', :travel_request => travel_request
        .col-md-10.col-md-offset-1
          %dl.dl-horizontal
          %hr
        .col-md-10.col-md-offset-3
          .row
            .col-md-6 
              %br
              %b=t 'staff.travel_request.total'
            .col-md-1
              %br
              %font{:style=>"font-weight:bold; text-decoration:underline;"}=@travel_claim.total_mileage 
            .col-md-1
              %br
              %font{:style=>"font-weight:bold; text-decoration:underline;"}= ringgols(@travel_claim.total_km_money) 
              
      #claims_details.tab-pane
        %br
        =render 'tab_claims_details'
        
      #claims_approval.tab-pane
        %br
        =render 'tab_claims_approval'

%br
.row
  .col-md-7.col-md-offset-2
    %hr
    .form-actions
      = link_to content_tag(:i, "", :class => "fa fa-arrow-left ") + " " + t('helpers.links.back'), staff_travel_claims_path, :class => 'btn btn-default'
      = link_to content_tag(:i, "", :class => "fa fa-edit") + " " + t('helpers.links.edit'), edit_staff_travel_claim_path(@travel_claim),  :class => 'btn btn-primary' 
      = link_to content_tag(:i, "", :class => "fa fa-trash-o icon-white") + " " + t('helpers.links.destroy'), |
        staff_travel_claim_path(@travel_claim),                                                                                                    |
        :method => 'delete',                                                                                                           |
        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },                   |
        :class => 'btn btn-danger'
      
      /- if @travel_request.staff_id == Login.first.staff_id && @travel_request.hod_accept == true
      /  = link_to content_tag(:i, "", :class => "fa fa-arrow-left ") + " " + t('helpers.links.back_travel_request'), staff_travel_requests_path, :class => 'btn btn-default'
      /  = link_to content_tag(:i, "", :class => "fa fa-arrow-left ") + " " + t('helpers.links.back_travel_log'), travel_log_index_staff_travel_requests_path, :class => 'btn btn-default'
      /- else
      /  = link_to content_tag(:i, "", :class => "fa fa-arrow-left ") + " " + t('helpers.links.back'), staff_travel_requests_path, :class => 'btn btn-default'
       
      /owner can edit 
      /- if @travel_request.staff_id == Login.first.staff_id
      /  = link_to content_tag(:i, "", :class => "fa fa-edit") + " " + t('helpers.links.edit'), edit_staff_travel_request_path(@travel_request),  :class => 'btn btn-primary' 
      
      /hod & admin can edit
      /- if @travel_request.is_submitted == true 
      /  = link_to content_tag(:i, "", :class => "fa fa-edit") + " " + t('staff.travel_request.approval'), approval_staff_travel_request_path(@travel_request),  :class => 'btn btn-primary' 
      
      /owner can edit
      /- if @travel_request.staff_id == Login.first.staff_id &&  @travel_request.hod_accept == true 
      /  /- if @travel_request.travel_claim_logs && @travel_request.staff_id == Login.first.staff_id && @travel_request.hod_accept == true
      /  = link_to content_tag(:i, "", :class => "fa fa-edit") + " " + t('staff.travel_request.log_details'), travel_log_staff_travel_request_path(@travel_request),  :class => 'btn btn-primary' 
      
      /= link_to content_tag(:i, "", :class => "fa fa-trash-o icon-white") + " " + t('helpers.links.destroy'), |
      /  staff_travel_request_path(@travel_request),                                                                                                    |
      /  :method => 'delete',                                                                                                           |
      /  :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },                   |
      /  :class => 'btn btn-danger'

