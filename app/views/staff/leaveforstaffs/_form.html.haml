.row
  .col-md-10.col-md-offset-1
    / Nav tabs
    %ul.nav.nav-tabs
      %li.active= link_to (t 'staff_leave.details'),"#leaveforstaff_details_edit", "data-toggle" => "tab"

      
    .tab-content{style:"padding-top:1em"}
      .col-md-offset-2 
        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.name', for: :staff_id
          .col-md-3
            = f.collection_select :staff_id, @staff_list, :id,  :staff_with_rank_position, {:include_blank =>t('helpers.prompt.select_staff'), :selected=>@selected},{class: 'selectpicker mandatory', "data-width"=>'400px'}

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.requestdate', for: :requestdate
          .col-md-2
            = f.text_field :requestdate, :class =>  'date_picker_reverse form-control', value: Date.today.strftime('%d-%m-%Y')

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.leavetype', for: :leavetype
          .col-md-3
            = f.select :leavetype, DropDown::STAFFLEAVETYPE, {:include_blank =>t('helpers.prompt.select_leave_type')} , {class: 'form-control mandatory'}

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.from', for: :leavestartdate
          .col-md-2
            = f.text_field :leavestartdate, :class =>  'date_picker_reverse form-control', value: @leaveforstaff.leavestartdate.try(:strftime, '%d-%m-%Y')

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.to', for: :leavenddate
          .col-md-2
            = f.text_field :leavenddate, :class =>  'date_picker_reverse form-control', value: @leaveforstaff.leavenddate.try(:strftime, '%d-%m-%Y')

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.address_on_leave', for: :address_on_leave
          .col-md-5
            = f.text_area :address_on_leave, class: 'form-control'

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.phone_on_leave', for: :phone_on_leave
          .col-md-3
            = f.text_field :phone_on_leave, class: 'form-control'

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.reason', for: :reason
          .col-md-5
            = f.text_field :reason, class: 'form-control'

        .form-group
          .col-sm-2.control-label
            = f.label t 'staff_leave.notes', for: :notes
          .col-md-5
            = f.text_area :notes, class: 'form-control'

        /.form-group
        /  .col-sm-2.control-label
        /    = f.label t 'staff_leave.submit', for: :submit
        /  .col-md-3
        /    = f.check_box :submit
        
        - if current_user.college.code!='kskbjb' 
          - if @leaveforstaff.new_record?
            - if @is_admin
              - approver1=Staff.valid_staffs
              - approver2=Staff.valid_staffs
              /TODO checker admin cannot approve own application
            - else
              - if current_user.userable.positions.count > 0
                - approver1=current_user.userable.approver1_list_multipost
                - approver2=current_user.userable.approver2_list_multipost
          - else
            - if @leaveforstaff.applicant.positions.count > 0
              - approver1=@leaveforstaff.approver1_list_multipost
              - approver2=@leaveforstaff.approver2_list_multipost
          
          - if @is_admin || current_user.userable.positions.count > 0
            .form-group
              .col-sm-2.control-label
                =f.label t 'staff_leave.approval1_id'
              .col-md-6
                =f.collection_select :approval1_id, Staff.where(id: approver1).order(rank_id: :asc, name: :asc), :id, :staff_with_rank_position, {include_blank: (t 'select')}, {class: 'selectpicker', "data-width"=>'400px'}
  
            .form-group
              .col-sm-2.control-label
                =f.label t 'staff_leave.approval2_id'
              .col-md-6
                =f.collection_select :approval2_id, Staff.where(id: approver2).order(rank_id: :asc, name: :asc), :id, :staff_with_rank_position, {include_blank: (t 'select')}, {class: 'selectpicker', "data-width"=>'400px'}