%fieldset   
  
  .row
    .col-sm-2
      = f.hidden_field :_destroy
      = f.collection_select :maintainer_id, AddressBook.all, :id, :name, {include_blank: (t 'select')}, {class: 'selectpicker'}
      = f.hidden_field :college_id, value: current_user.college_id
    .col-sm-2= f.text_field :workorderno, class: 'form-control'
    .col-sm-1= f.text_field :maintcost, class: 'form-control'
    .col-sm-2= f.text_area :details, class: 'form-control'
    .col-sm-2
      /revised - 3Feb2018
      = check_box_tag :check_schedule, true, "", :class => 'schedule'
      = hidden_field_tag :selected_type, f.object.maint_type, :class => 'selectedone'
      = f.select :maint_type, [["Berjadual", DropDown::SCHEDULE_MAINT] , ["Tidak Berjadual", DropDown::UNSCHEDULE_MAINT] ],{}, {class: 'form-control'}
      = f.text_field :warranty, class: 'form-control', placeholder: 'Warranty'
      .small=t('time.months')
      
    .col-sm-1
      = link_to content_tag(:i, "", class:  "fa fa-trash-o"), "#", class: "removing_fields"

:javascript
  $('.selectpicker').selectpicker('render');
  
  $('.removing_fields').click(function(){
    var fieldset=$(this).parent().parent().parent();
    var row=$(this).parent().parent();
    var all_fields=row.children().children();
    var destroyer=all_fields[0];
    destroyer.value=true;    
    /*row.hide();*/
    fieldset.hide();
  });

  /*on load, assign checkbox value based on saved item*/
  $('.selectedone').each(function(){
    /*alert($(this).val());*/
    var checkbb=$(this).parent().children()[0];
    
    if ($(this).val()=='1')
    { checkbb.checked=true; }
    else
    { checkbb.checked=false;}
  });
  
  
  /*on load, assign selected value of saved insurance type & display insurance type list based on optgroup of saved insurance type*/
  $('.schedule').each(function(){
    var row=$(this).parent().parent();
    var selecttype=$(this).parent().children()[2];
    var warranty_field=$(this).parent().children()[3];
    var small_text=$(this).parent().children()[4];
      
    if ($(this).is(':checked'))
    {  
      $(selecttype).children('optgroup[label="Berjadual"]').show();
      $(selecttype).children('optgroup[label="Tidak Berjadual"]').hide();
        
      var selected1=$(selecttype).val();
      var optgroup=$(selecttype).children('optgroup[label="Berjadual"]');
      var option = optgroup.find('option[value="'+selected1+'"]');
        
      option.attr('selected', true);
      
      $(warranty_field).hide();  
      $(small_text).hide();
    }
    else
    {
      $(selecttype).children('optgroup[label="Tidak Berjadual"]').show();
      $(selecttype).children('optgroup[label="Berjadual"]').hide();
        
      var selected1=$(selecttype).val();
      var optgroup=$(selecttype).children('optgroup[label="Tidak Berjadual"]');
      var option = optgroup.find('option[value="'+selected1+'"]');
        
      option.attr('selected', true);
      
      $(warranty_field).show();  
      $(small_text).show();
    }
  });
  
  
  /*on click, display insurance type list based on optgroup of saved insurance type*/
  $('.schedule').click(function(){
    var row=$(this).parent().parent();
    var selecttype=$(this).parent().children()[2];
    var warranty_field=$(this).parent().children()[3];
    var small_text=$(this).parent().children()[4];
      
    if ($(this).is(':checked'))
    {  
      $(selecttype).children('optgroup[label="Berjadual"]').show();
      $(selecttype).children('optgroup[label="Tidak Berjadual"]').hide();
        
      var selected1=$(selecttype).val();
      var optgroup=$(selecttype).children('optgroup[label="Berjadual"]');
      var option = optgroup.find('option[value="'+selected1+'"]');
        
      option.attr('selected', true);
      
      $(warranty_field).hide();  
      $(small_text).hide();
    }
    else
    {
      $(selecttype).children('optgroup[label="Tidak Berjadual"]').show();
      $(selecttype).children('optgroup[label="Berjadual"]').hide();
        
      var selected1=$(selecttype).val();
      var optgroup=$(selecttype).children('optgroup[label="Tidak Berjadual"]');
      var option = optgroup.find('option[value="'+selected1+'"]');
        
      option.attr('selected', true);
      
      $(warranty_field).show();  
      $(small_text).show();
    }
  });
  
    
/     
/   $('.schedule').each(function(){
/     var row=$(this).parent().parent();
/     var warranty_field=$(this).parent().children()[4];
/     var small_text=$(this).parent().children()[5];
/     var maintype_select=$(this).parent().children()[3];
/     if ($(this).is(':checked'))
/     {  
/       $(maintype_select).hide();
/       $(warranty_field).hide(); 
/       $(small_text).hide();
/     }
/     else
/     {  
/       $(maintype_select).show();
/       $(warranty_field).show();  
/       $(small_text).show();
/     }
/   });
/   
/   $('.schedule').click(function(){
/     var row=$(this).parent().parent();
/     var warranty_field=$(this).parent().children()[4];
/     var small_text=$(this).parent().children()[5];
/     var maintype_select=$(this).parent().children()[3];
/     if ($(this).is(':checked'))
/     {  
/       $(maintype_select).hide();
/       $(warranty_field).hide(); 
/       $(small_text).hide();
/     }
/     else
/     {  
/       $(maintype_select).show();
/       $(warranty_field).show();  
/       $(small_text).show();
/     }
/   });
  
/   $('.added').each(function(){
/     var row=$(this).parent().parent();
/     var warranty_field=$(this).parent().children()[2];
/     var small_text=$(this).parent().children()[3];
/     if ($(this).is(':checked'))
/     {  
/       $(warranty_field).show(); 
/       $(small_text).show();
/     }
/     else
/     {  
/       $(warranty_field).hide();  
/       $(small_text).hide();
/     }
/   });
/   
/   $('.added').click(function(){
/     var row=$(this).parent().parent();
/     var warranty_field=$(this).parent().children()[2];
/     var small_text=$(this).parent().children()[3];
/     if ($(this).is(':checked'))
/     {  
/       $(warranty_field).show(); 
/       $(small_text).show();
/     }
/     else
/     {  
/       $(warranty_field).hide();  
/       $(small_text).hide();
/     }
/   });
