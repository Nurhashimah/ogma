- model_class = AssetDefect
.page-header
  %h1
    = t 'edit'
    = @defective.asset.assetcode

.row
  = form_for @defective,  html: { multipart: true, class: 'form-horizontal' }  do |f| 
    = render 'shared/error_messages', object: f.object

    %ul.nav.nav-tabs
      %li.active= link_to (t "asset.defect.details"), "#details",   "data-toggle" => "tab"
      %li= link_to (t "asset.defect.process"),      "#process", "data-toggle" => "tab"
      - if @defective.is_processed
        %li= link_to (t "asset.defect.decision"),     "#decision","data-toggle" => "tab"

    .tab-content.col-md-offset-1
      %dl.dl-horizontal
        %dt= t 'asset.assetcode'
        %dd= @defective.asset.assetcode

      #details.tab-pane.fade.in.active
        %dl.dl-horizontal
          %dt= t 'asset.category.type_model_name'
          %dd= "#{@defective.asset.typename} : #{@defective.asset.name} : #{@defective.asset.modelname}" 
          %dt= t 'asset.serialno'
          %dd= @defective.asset.serialno
  
        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.description', for: :description
          .col-md-4
            = f.text_field :description, class: 'form-control'

        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.reported_by', for: :reported_by
          .col-md-4
            = f.collection_select :reported_by, Staff.all.order(name: :asc), :id, :name, {:include_blank =>t('helpers.prompt.select_staff'), :selected =>@defective.reported_by},{class: 'selectpicker', "data-width"=>'230px'} 

      #process.tab-pane.fade.in
        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.action_type', for: :process_type
          .col-md-4
            .row
              .col-sm-1
                = f.radio_button :process_type, "repair", :id => 'button_repair',  :class => 'radio_action_type' 
              .col-sm-2
                = t 'asset.defect.repair'
              .col-sm-1
                = f.radio_button :process_type, "dispose", :id => 'button_dispose', :class => 'radio_action_type' 
              .col-sm-2
                = t 'asset.defect.dispose'

        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.recommendation', for: :recommendation
          .col-md-4
            = f.text_field :recommendation, class: 'form-control'

        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.is_processed', for: :is_processed
          .col-md-4
            = f.check_box :is_processed, class: 'form-control'

        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.processed_by', for: :processed_by
          .col-md-4
            = f.collection_select :processed_by, Staff.all.order(name: :asc), :id, :name, {:include_blank =>t('helpers.prompt.select_staff'), :selected=>@defective.processed_by},{class: 'selectpicker', "data-width"=>'230px'} 

        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.processed_on', for: :processed_on
          .col-md-2
            = f.text_field :processed_on, class: 'date_picker form-control'

      #decision.tab-pane.fade.in
        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.approval', for: :decision
          .col-md-4
            = f.check_box :decision, class: 'form-control'
            
        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.decision_by', for: :decision_by
          .col-md-4
            = f.collection_select :decision_by, Staff.all.order(name: :asc), :id, :name, {:include_blank =>t('helpers.prompt.select_staff'), :selected=>@defective.decision_by},{class: 'selectpicker', "data-width"=>'230px'} 
            
        .form-group
          .col-sm-2.control-label
            = f.label t 'asset.defect.decision_on', for: :decision_on
          .col-md-2
            = f.text_field :decision_on, class: 'date_picker form-control'

      .col-md-offset-1
        .form-group
          .col-sm-offset-4.col-sm-1
            = link_to content_tag(:i, "", :class => "fa fa-arrow-left ") + " " + t('.back', :default => t("helpers.links.back")), asset_defects_path(@defective), :class => 'btn btn-default'
          .col-sm-2
            = f.submit t('update'), class: "btn btn-primary" 
