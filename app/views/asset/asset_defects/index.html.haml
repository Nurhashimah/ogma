- model_class = AssetDefect
.page-header
  %h1= t('asset.defect.title')#, :default => model_class.model_name.human.pluralize
  
.navbar.navbar-inverse{role: "navigation", style: "padding-right:40px;"}
  %ul.nav.navbar-nav
  %ul.nav.navbar-nav.navbar-right
    %li.toga= link_to content_tag(:li, fa_icon("search", text: (t 'actions.search'))), "#", class: "index_search_bar"
    %li= link_to  (fa_icon "print", text: (t 'print')),  defect_list_asset_defects_path(params.merge(format: 'pdf' ))

.row
  .col-md-12
    .alert.alert-warning
      %strong=(t 'remarks')+" : "
      =t('asset.defect.report')
      %button.btn.btn-default.btn-xs
        %i.fa.fa-bug
          
  %table.table-striped.table-hover.ogma
    %thead
      %tr
        %th{width: '25%'}= sort_link(@search, :asset_assetcode, (t 'asset.assetcode'))
        %th{width: '30%'}= t('asset.category.type_name_model')
        %th{width: '15%'}= sort_link(@search, :asset_serialno, (t 'asset.serial_no'))
        %th{width: '15%'}= sort_link(@search, :asset_location_location_name, (t 'location.title'))
        %th{width: '15%'}= t('asset.defect.notes')
    %tbody
    = render "index_search"
    - @defective.each do |defect|
      %tr
        %td= link_to defect.asset.try(:assetcode), asset_defect_path(defect)
        %td= "#{defect.asset.try(:typename)} - #{defect.asset.name} - #{defect.asset.modelname}"  
        %td= defect.asset.try(:serialno)
        %td= link_to defect.asset.asset_placements.last.try(:location).try(:location_list), (campus_location_path(defect.asset.asset_placements.last.location.id)) rescue nil
        %td
          /= defect.id
         
  .right{style:"padding:0 30px; margin:0;"}= paginate @defective, :theme => 'twitter-bootstrap-3'

:javascript
$(document).ready(function(){
  $('.toga').click(function() {
    $('.search_row').toggle(); 
  });
});
